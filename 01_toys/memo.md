# おもちゃ

```scheme
(define atom?
  (lambda (x)
    (and (not (pair? x)) (not (null? x)))))
```

## S式、アトム、リスト

数値や文字列がアトム。アトムとリストをまとめてS式と呼んでいる感じか。

本には出てこないがアトムの定義として「コンスセルされていないデータ」という言い方もあるらしい。本の中ではコンスセルを扱っていない。(`cons`の第2引数はリストであるべきとしている)

```scheme
(cons 1 2) ; (1 . 2)
(cons 1 (cons 2 3)) ; (1 2 . 3)
```

```scheme
(atom? 1)     ; #t
(atom? 'hoge) ; #t
(atom? '())   ; #f
```

## quote

引数を評価せずに帰すための関数。
`'`は`quote`の糖衣構文。

```scheme
; aというリテラル
(quote a)
'a

; リスト(a)
(quote (a))
'(a)
```

## car

リストの先頭要素を返す。

> ### Car の掟
> 
> 関数 car は空でないリストに対してのみ定義される。

```scheme
(car '(1 2))     ; 1
(car '(a))       ; a
(car '((1 2) 3)) ; (1 2)
(car '())        ; NG
(car 'hoge)      ; NG
```

## cdr

リストの先頭要素を除いたリストを返す。
クダーと読むらしい。

> ### Cdr の掟
> 
> 関数 cdr は空でないリストについてのみ定義される。
> 空でないリストの cdr は常に別のリストになる。

```scheme
(cdr '(a b c))         ; (b c)
(cdr '(1))             ; ()
(cdr '((1 2) (3 4) 5)) ; ((3 4) 5)
(cdr '())              ; NG
(cdr 'hoge)            ; NG
```

## cons

リストの先頭に要素を加える。

> ### Cons の掟
> 
> 関数 cons は2つの引数を取る。
> cons の第2引数はリストでなければならない。
> 結果はリストとなる

```scheme
(cons 1 '(2 3))      ; (1 2 3)
(cons 'a '())        ; (a)
(cons '(1 2) '(3 4)) ; ((1 2) 3 4)
(cons 1 2)           ; (1 . 2) <- 本には説明がないがコンスセル
```

## null

> ### Null? の掟
> 
> 関数 null? はリストに対してのみ定義される。

```scheme
(null? '())  ; #t
(null? '(1)) ; #f
(null? 1)    ; #f <- 注釈にある通り、実際には空リスト以外 #f となる
```

## eq?

数でないアトム同士を比較する。

> ### Eq? の掟
> 
> 関数 eq? は2つの引数を取る。
> どちらも数出ないアトムでなければならない。

```scheme
(eq? 'hoge 'hoge) ; #t
(eq? 'hoge 'fuga) ; #f
(eq? 10 10)       ; #t <- 実際には数値も比較できる
(eq? 10 1)        ; #f
(eq? '() '())     ; #t <- 空リスト同士の比較もできた
(eq? '(1) '(1))   ; #f <- 空でないリストは比較できなかった
```
